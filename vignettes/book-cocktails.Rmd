---
title: "book-cocktails"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{book-cocktails}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(cocktails)
library(tidyverse)

book <- yaml::read_yaml("data/book-22.yml")

selected <- book %>% unlist(use.names = FALSE)
length(selected)

known <- cocktails %>% purrr::map_chr("title")
setdiff(selected, known)

book_cocktails <- cocktails %>% keep(\(c) c$title %in% selected)

book_ingredients <- tibble(
  title = book_cocktails %>% purrr::map_chr("title"),
  ingredients = book_cocktails %>% map(ingredients)
) 

book_ingredients %>% 
  unnest_longer(ingredients) %>% 
  count(ingredients, sort = TRUE) %>% 
  filter(n < 3)

```
